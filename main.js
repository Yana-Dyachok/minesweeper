(()=>{"use strict";document.body.setAttribute("class","body change");const e=document.createElement("div");e.setAttribute("class","wrapper"),document.body.append(e);const t=document.createElement("header");t.setAttribute("class","header");const n=document.createElement("div");n.setAttribute("class","clock-face");const a=document.createElement("div");a.setAttribute("class","first-row");const s=document.createElement("div");s.setAttribute("class","level-block");const o=document.createElement("div");o.setAttribute("class","menu-title"),o.textContent="Level: ",s.append(o);const c=document.createElement("select");c.setAttribute("class","level");const i=document.createElement("option");i.value="value1",i.textContent="easy";const l=document.createElement("option");l.value="value2",l.textContent="medium";const r=document.createElement("option");r.value="value3",r.textContent="hard",c.appendChild(i),c.appendChild(l),c.appendChild(r),s.append(c),a.append(s);const d=document.createElement("div");d.setAttribute("class","mine-block");const u=document.createElement("div");u.setAttribute("class","menu-title"),u.textContent=" Mines: ",d.append(u);let m=document.createElement("input");m.setAttribute("class","mine-count"),m.setAttribute("type","number"),m.setAttribute("max","100"),m.setAttribute("maxlength","2"),m.placeholder=10,d.append(m),a.append(d);const p=document.createElement("div");p.setAttribute("class","second-row");const f=document.createElement("div");f.setAttribute("class","theme-toggle change"),p.append(f);const g=document.createElement("div");g.setAttribute("class","smile"),p.append(g);const b=document.createElement("div");b.setAttribute("class","smiley-face"),g.append(b);const h=document.createElement("div");h.setAttribute("class","eye-left"),b.append(h);const v=document.createElement("div");v.setAttribute("class","eye-right"),b.append(v);const E=document.createElement("div");E.setAttribute("class","mouth"),b.append(E);const A=document.createElement("div");A.setAttribute("class","mike change");const y=document.createElement("audio");y.setAttribute("class","audio-lost"),y.src="./assets/audio/ou_nou_nou_nou.mp3",A.append(y);const x=document.createElement("audio");x.setAttribute("class","audio-win"),x.src="./assets/audio/Queen_We_Are_The_Champions.mp3",A.append(x);const L=document.createElement("audio");L.setAttribute("class","audio-opened"),L.src="./assets/audio/neobyichnyiy-zvuk-knopki1.mp3",A.append(L);const S=document.createElement("audio");S.setAttribute("class","audio-my-mine"),S.src="./assets/audio/zvonkiy-zvuk-najatiya-knopki1.mp3",A.append(S),p.append(A);const k=document.createElement("div");k.setAttribute("class","third-row");const C=document.createElement("div");C.setAttribute("class","click-points");const I=document.createElement("div");I.setAttribute("class","flag"),I.innerHTML='<img src="./assets/img/Flag-green256_25053.png" alt="flag" width="30"  height="30">',C.append(I);const w=document.createElement("div");w.setAttribute("class","point-bombs change"),C.append(w);const M=document.createElement("div");M.setAttribute("class","menu-title"),M.textContent="Clicks: ",C.append(M);const T=document.createElement("div");T.setAttribute("class","point-clicks change"),T.textContent=0,C.append(T),k.append(C);const _=document.createElement("div");_.setAttribute("class","time-game");const q=document.createElement("div");q.setAttribute("class","menu-title"),_.append(q),q.textContent="Time: ";const O=document.createElement("div");O.setAttribute("class","time-game change"),O.textContent="00:00",_.append(O),k.append(_),n.append(a),n.append(p),n.append(k),t.append(n),e.append(t);const D=document.createElement("main");D.setAttribute("class","main");const N=document.createElement("div");N.setAttribute("class","playing-field"),D.append(N),e.append(D);const H=document.createElement("footer");H.setAttribute("class","footer");const Y=document.createElement("h3");Y.setAttribute("class","text-footer change"),H.append(Y),e.append(H);const z=document.createElement("div");z.setAttribute("class","overlay"),document.body.append(z);let G=parseInt(m.value)||10,J=10,j=10,$=[],F=0,Q=!1,W=G,B=0;w.innerText=W;let K,P=!1,R=!1,U=localStorage.getItem("level")||"easy",V=0,X=!1,Z=!0;class ee{constructor(){this.isMine=!1,this.nearMine=0,this.isOpen=!1}}function te(e,t){J=e,j=e,G=t}function ne(e){"easy"===e&&te(10,10),"medium"===e&&te(15,40),"hard"===e&&te(25,70),m.placeholder=G,w.innerText=G}function ae(){if(R)return V=O.textContent,void pe();if(Q){let e=~~((new Date-K)/1e3),t=~~(e/60),n=e%60;O.textContent=`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}}function se(){const e=document.querySelector(".table-boxes");for(let t=0;t<J;t++)for(let n=0;n<j;n++){let a=e.rows[n].children[t];$[t][n].isMine&&a.classList.add("mine")}}function oe(e,t){let n=t>0?t-1:t,a=e<J-1?e+1:e,s=t<j-1?t+1:t,o=0;for(let c=e>0?e-1:e;c<=a;c++)for(let a=n;a<=s;a++)!$[c][a].isMine||e==c&&t==a||o++;$[e][t].nearMine=o,$[e][t].innerHTML=o}function ce(e){R||(re(e.target.cellIndex,e.target.parentNode.rowIndex),document.querySelectorAll("td").forEach((e=>{switch(e.textContent){case"1":e.classList.add("one");break;case"2":e.classList.add("two");break;case"3":e.classList.add("three");break;case"4":e.classList.add("four");break;case"5":e.classList.add("five")}})))}function ie(e){A.classList.contains("off")?e.pause():e.play()}function le(){A.classList.contains("off")?(S.pause(),y.pause(),L.pause(),x.pause()):("You lost!!!"===Y.textContent&&y.play(),"Greeting!!! You win!!!"===Y.textContent&&x.play())}function re(e,t){let n=document.querySelector(".table-boxes").rows[t].children[e];if(!$[e][t].isOpen)if($[e][t].isMine)n.classList.add("mine"),se(),Y.textContent="You lost!!!",R=!0,Q=!1,E.style.animation="mouth 1s infinite",ie(y);else if(0==$[e][t].nearMine?n.innerHTML="":n.innerHTML=$[e][t].nearMine,$[e][t].isOpen=!0,n.classList.add("opened"),ie(L),F++,J*j-G==F&&(Y.textContent="Greeting!!! You win!!!",Q=!1,R=!0,se(),ie(x),h.style.animation="eye 1s infinite",v.style.animation="eye 1s infinite",E.style.animation="mouth 1s infinite"),0==$[e][t].nearMine){let n=t>0?t-1:t,a=e+1<J?e+1:e,s=t+1<j?t+1:t;for(let t=e>0?e-1:e;t<=a;t++)for(let e=n;e<=s;e++)re(t,e)}}function de(){F=0,function(){$=[];for(let e=0;e<J;e++){let e=[];for(let t=0;t<j;t++)e.push(new ee);$.push(e)}P=!1}(),function(){N.innerHTML="";const e=document.createElement("table");e.setAttribute("class","table-boxes");for(let t=0;t<j;t++){const t=document.createElement("tr");for(let e=0;e<J;e++){const e=document.createElement("td");e.setAttribute("class","rows-boxes change"),f.classList.contains("dark")&&e.classList.add("dark"),t.appendChild(e)}e.appendChild(t)}N.appendChild(e)}(),Y.textContent="Good Luck!!!"}c.addEventListener("change",(function(){let e=c.options[c.selectedIndex];U=e.textContent,pe(),ne(U),de()})),m.addEventListener("change",(function(){G=parseInt(m.value),m.placeholder=G,w.innerText=G,de()})),A.addEventListener("click",(()=>{A.classList.toggle("off"),le(),Z=!A.classList.contains("off"),pe()})),N.addEventListener("click",(function(e){T.textContent=++B,Q=!0,P?e.target.matches("td")&&!e.target.matches(".my-mine")&&ce(e):(K=new Date,setInterval(ae,1e3),e.target.classList.add("opened"),function(e,t){for(let n=0;n<G;){let a=~~(Math.random()*J),s=~~(Math.random()*j);a!==e&&s!==t&&0==$[a][s].isMine&&($[a][s].isMine=!0,n++)}!function(){for(let e=0;e<J;e++)for(let t=0;t<j;t++)oe(e,t)}()}(e.target.cellIndex,e.target.parentNode.rowIndex),ce(e),P=!0)})),N.addEventListener("contextmenu",(function(e){Q=!0,e.preventDefault(),ie(S),e.target.matches("td")&&function(e){if(R)return;const t=document.querySelectorAll(".rows-boxes");let n=e.target.cellIndex,a=e.target.parentNode.rowIndex;if($[n][a].isOpen)return;e.target.classList.toggle("my-mine");const s=Array.from(t).filter((e=>e.classList.contains("my-mine")));W=G-s.length,w.innerText=W}(e)})),de(),f.addEventListener("click",(()=>{document.querySelectorAll(".change").forEach((e=>e.classList.toggle("dark"))),X=!!f.classList.contains("dark"),pe()}));const ue=document.querySelector('script[src="./index.js"]');document.body.appendChild(ue),g.addEventListener("click",(function(){localStorage.clear(),location.reload()})),window.getComputedStyle(E);let me=[];function pe(){localStorage.setItem("mike",Z),localStorage.setItem("theme",X),localStorage.setItem("level",U),localStorage.setItem("gameDuration",V),localStorage.setItem("duration",JSON.stringify(me))}window.addEventListener("load",(function(){if(localStorage.getItem("gameDuration")&&(V=localStorage.getItem("gameDuration"),me.push(V),console.log(me),localStorage.setItem("duration",JSON.stringify(me))),localStorage.getItem("mike")&&(Z=localStorage.getItem("mike"),"false"===Z?A.classList.add("off"):A.classList.remove("off"),le()),localStorage.getItem("theme")){X=localStorage.getItem("theme");const e=document.querySelectorAll(".change");"true"===X?e.forEach((e=>e.classList.add("dark"))):e.forEach((e=>e.classList.remove("dark")))}if(localStorage.getItem("level")&&(ne(localStorage.getItem("level")),Array.from(c.children).forEach((e=>{})),de()),localStorage.getItem("duration")){const e=localStorage.getItem("duration");me=JSON.parse(e)}})),window.addEventListener("beforeunload",pe)})();